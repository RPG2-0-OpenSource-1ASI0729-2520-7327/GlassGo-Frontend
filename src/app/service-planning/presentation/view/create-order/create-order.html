<!--
  Header Section
  Displays page context and business operation description
-->
<div class="header-section">
  <h1 class="header-title">{{ 'service-planning.title' | translate }}</h1>
  <p class="header-subtitle">{{ 'service-planning.manageOrderDetails' | translate }}</p>
</div>

<div class="content-layout">
  <!--
    Main Form Section
    Captures delivery information for the order domain entity
  -->
  <div class="form-section">
    <form [formGroup]="orderForm" (ngSubmit)="onSubmitOrder()" class="delivery-form">
      <div class="form-header">
        <h3>{{ 'service-planning.deliveryInformation' | translate }}</h3>
      </div>

      <!--
        Delivery Date Field
        Required field for scheduling order delivery
      -->
      <div class="form-group">
        <label for="deliveryDate" class="form-label">{{ 'service-planning.deliveryDate' | translate }}</label>
        <input
          type="date"
          id="deliveryDate"
          formControlName="deliveryDate"
          class="form-input"
          placeholder="dd/mm/aaaa"
          [class.error]="orderForm.get('deliveryDate')?.invalid && orderForm.get('deliveryDate')?.touched">
        <!-- Validation error message for delivery date -->
        <div class="error-message"
             *ngIf="orderForm.get('deliveryDate')?.invalid && orderForm.get('deliveryDate')?.touched">
          {{ 'service-planning.errors.deliveryDateRequired' | translate }}
        </div>
      </div>

      <!--
        Delivery Time Field
        Required field for specific time slot selection
      -->
      <div class="form-group">
        <label for="deliveryTime" class="form-label">{{ 'service-planning.deliveryTime' | translate }}</label>
        <input
          type="time"
          id="deliveryTime"
          formControlName="deliveryTime"
          class="form-input"
          placeholder="--:-- ----"
          [class.error]="orderForm.get('deliveryTime')?.invalid && orderForm.get('deliveryTime')?.touched">
        <!-- Validation error message for delivery time -->
        <div class="error-message"
             *ngIf="orderForm.get('deliveryTime')?.invalid && orderForm.get('deliveryTime')?.touched">
          {{ 'service-planning.errors.deliveryTimeRequired' | translate }}
        </div>
      </div>

      <!--
        Delivery Address Field
        Required field for order destination
      -->
      <div class="form-group">
        <label for="deliveryAddress" class="form-label">{{ 'service-planning.deliveryAddress' | translate }}</label>
        <input
          type="text"
          id="deliveryAddress"
          formControlName="deliveryAddress"
          class="form-input"
          [placeholder]="'service-planning.deliveryAddressPlaceholder' | translate"
          [class.error]="orderForm.get('deliveryAddress')?.invalid && orderForm.get('deliveryAddress')?.touched">
        <!-- Validation error message for delivery address -->
        <div class="error-message"
             *ngIf="orderForm.get('deliveryAddress')?.invalid && orderForm.get('deliveryAddress')?.touched">
          {{ 'service-planning.errors.deliveryAddressRequired' | translate }}
        </div>
      </div>

      <!--
        Special Instructions Field
        Optional field for additional delivery notes or requirements
      -->
      <div class="form-group">
        <label for="specialInstructions" class="form-label">{{ 'service-planning.specialInstructions' | translate }}</label>
        <textarea
          id="specialInstructions"
          formControlName="specialInstructions"
          class="form-textarea"
          rows="4"
          [placeholder]="'service-planning.specialInstructionsPlaceholder' | translate">
        </textarea>
      </div>

      <!--
        Form Action Buttons
        Submit: Triggers order creation domain command
        Cancel: Resets form and order state
      -->
      <div class="form-actions">
        <button type="button" class="btn btn-cancel" (click)="onCancel()">
          {{ 'service-planning.cancel' | translate }}
        </button>
        <button type="submit" class="btn btn-submit" [disabled]="!isFormValid">
          {{ 'service-planning.submitOrder' | translate }}
        </button>
      </div>
    </form>
  </div>

  <!--
    Order Summary Section
    Displays calculated totals from the Order domain entity
    Sticky positioning keeps summary visible during scrolling
  -->
  <div class="summary-section">
    <div class="order-summary-card">
      <h3 class="summary-title">{{ 'service-planning.orderSummary' | translate }}</h3>

      <!-- Subtotal: Sum of all order items before tax -->
      <div class="summary-item">
        <span class="summary-label">{{ 'service-planning.subtotal' | translate }}:</span>
        <span class="summary-value">S/ {{ orderSummary.subtotal | number:'1.2-2' }}</span>
      </div>

      <!-- VAT: Tax amount calculated at 18% rate -->
      <div class="summary-item">
        <span class="summary-label">{{ 'service-planning.vat' | translate }} (18%):</span>
        <span class="summary-value">S/ {{ orderSummary.vatAmount | number:'1.2-2' }}</span>
      </div>

      <!-- Total: Final amount including VAT (highlighted) -->
      <div class="summary-item summary-total">
        <span class="summary-label">{{ 'service-planning.total' | translate }}:</span>
        <span class="summary-value">S/ {{ orderSummary.total | number:'1.2-2' }}</span>
      </div>

      <!-- Item Count: Total quantity of products in order -->
      <div class="summary-item">
        <span class="summary-label">{{ 'service-planning.items' | translate }}:</span>
        <span class="summary-value">{{ orderSummary.itemCount }} {{ 'service-planning.products' | translate }}</span>
      </div>
    </div>
  </div>
</div>

